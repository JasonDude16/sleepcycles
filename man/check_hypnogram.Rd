% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sleepcycles_from_hypnogram.R
\name{.check_hypnogram_base}
\alias{.check_hypnogram_base}
\alias{check_hypnogram}
\title{Internal Hypnogram Validation Function}
\usage{
.check_hypnogram_base(
  df,
  epoch_col,
  stage_col,
  valid_levels = c("N3", "N2", "N1", "R", "W", "A")
)

check_hypnogram(df, epoch_col, stage_col, id_col = NULL, on_error = "stop")
}
\arguments{
\item{df}{A data frame containing the hypnogram.}

\item{epoch_col}{The column name that represents sleep epochs (must be numeric and sequential).}

\item{stage_col}{The column name representing sleep stages.}

\item{valid_levels}{A vector of allowed sleep stages. Default: \code{c("N3", "N2", "N1", "R", "W", "A")}.}

\item{id_col}{(Optional) A column representing subject IDs for grouped data. If provided, validation runs separately for each subject.}

\item{on_error}{Defines error handling behavior:
\itemize{
\item \code{"stop"} (default) will halt execution on errors.
\item \code{"message"} will print warnings instead of stopping execution.
}}
}
\value{
Returns \code{NULL} if no issues are found. Otherwise, an error is thrown.

Returns \code{NULL} if validation is successful. Otherwise, it stops or prints an error message.
}
\description{
This function is used internally by \code{check_hypnogram()} to validate individual hypnograms.
It checks for:
\itemize{
\item Missing values in \code{stage_col} or \code{epoch_col}
\item Non-sequential or non-numeric \code{epoch_col}
\item Invalid sleep stage labels
}

This function checks the structure and validity of a hypnogram dataset. It ensures:
\itemize{
\item The presence of required columns (\code{epoch_col}, \code{stage_col}).
\item The correct format of \code{epoch_col} (numeric, ordered, contiguous).
\item The correct format of \code{stage_col} (valid sleep stages, no missing values).
\item If \code{id_col} is provided, validation is performed separately for each subject.
}
}
\examples{
\dontrun{
df <- data.frame(epoch = 1:100, stage = sample(c("N3", "N2", "N1", "R", "W"), 100, replace = TRUE))
check_hypnogram(df, epoch_col = "epoch", stage_col = "stage")

grouped_df <- data.frame(id = rep(1:2, each = 50), epoch = rep(1:50, 2), stage = sample(c("N3", "N2", "N1", "R", "W"), 100, replace = TRUE))
check_hypnogram(grouped_df, epoch_col = "epoch", stage_col = "stage", id_col = "id")
}
}
\keyword{internal}
