---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# sleepcycles: Detect and Visualize Sleep Cycles from Hypnograms

![Build Status](https://github.com/yourusername/sleepcycles/workflows/R-CMD-check/badge.svg)
![GitHub release](https://img.shields.io/github/v/release/jasondude16/sleepcycles)
![License: MIT](https://img.shields.io/github/license/yourusername/sleepcycles)

The `sleepcycles` package provides tools for detecting, analyzing, and visualizing sleep cycles from hypnogram data using density-based and rule-based (Feinberg) algorithms. It supports both single- and multi-subject hypnograms, enabling users to extract and explore Non-REM (NREMP) and REM (REMP) periods with flexible parameter settings. The package includes an interactive Shiny application, a suite of visualization functions and utilities validating sleep staging data. 

üìå Designed for sleep researchers, clinicians, and data scientists, `sleepcycles` helps uncover the underlying dynamics of sleep architecture and assess the impact of sleep patterns in healthy and clinical populations.

------------------------------------------------------------------------

## **üì¶ Installation**

You can install the development version from GitHub using `{remotes}`:

``` r
# Install remotes if not installed
install.packages("remotes")

# Install sleepcycles from GitHub
remotes::install_github("yourusername/sleepcycles")
```

## üöÄ Quick Start Guide

#### 1Ô∏è‚É£ Load the Package

```{r}
library(sleepcycles)
```

#### 2Ô∏è‚É£ Load Example Data

```{r}
data("hypnogram_single", package = "sleepcycles")
head(hypnogram_single)
```

#### 3Ô∏è‚É£ Detect Sleep Cycles

```{r}
# warnings expected
sleepcycles_obj <- sleepcycles_from_hypnogram(
  hypnogram_single, 
  epoch_col = "epoch", 
  stage_col = "stage", 
  method = "dude"
)
```

#### 4Ô∏è‚É£ Visualize Sleep Cycles

```{r fig.height=7}
plot_summary(sleepcycles_obj)
```

#### 5Ô∏è‚É£ Run the Interactive Shiny App

```{r}
if (interactive()) {
  run_sleepcycles_app(sleepcycles_obj)
}
```

### üìä Features
- ‚úî **Sleep Cycle Detection**: Supports DUDE (Density-Based) and Feinberg (Rule-Based) algorithms
- ‚úî **Interactive Visualization**: Generate hypnograms, density plots, and cycle summaries
- ‚úî **Shiny App**: Modify and explore cycle detection parameters interactively 
- ‚úî **Preprocessing & Validation**: Built-in data validation tools 
- ‚úî **Single and Grouped Data Support**: Works with individual and multi-subject hypnogram datasets

### üìñ Available Functions

| **Function**                      | **Description**                                         |
|------------------------------------|---------------------------------------------------------|
| `sleepcycles_from_hypnogram()`     | Detects sleep cycles using DUDE or Feinberg            |
| `plot_hypnogram()`                 | Generates a hypnogram plot                             |
| `plot_densities()`                 | Plots sleep cycle density curves                      |
| `plot_cycles()`                    | Visualizes detected sleep cycles                      |
| `plot_summary()`                   | Provides a combined visualization of sleep cycles     |
| `run_sleepcycles_app()`            | Launches an interactive Shiny app for cycle exploration |
| `check_hypnogram()`                | Validates hypnogram data for errors                   |

### üìö Example Datasets
The package includes two example datasets: `hypnogram_single` and `hypnogram_grouped`, containing single and multi-subject hypnogram datasets, respectively.

```{r}
data("hypnogram_single", package = "sleepcycles")
data("hypnogram_grouped", package = "sleepcycles")
```

### üìå Contributing
We welcome contributions! If you find a bug, please [open an issue](https://github.com/JasonDude16/sleepcycles/issues).

### üìú License
This package is licensed under the MIT License.
